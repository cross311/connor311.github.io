
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>The Tech That Keeps Me Ticking  | Connor Ross | Tech</title>

	<meta name="author" content="Connor Ross">

<meta name="description" content="Connor Ross' place to ramble about the interesting development tech he has used recently."> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Connor Ross | Tech" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Connor Ross | Tech</a></h1>
<span class="tagline">The Tech That Keeps Me Ticking</span>
<nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/08/13/etudes-for-erlang-ch-10/">
			
				Études for Erlang - CH 10</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-08-13T00:13:00-04:00" pubdate data-updated="true">Aug 13<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<h2>Chapter 10: Storing Structured Data</h2>

<p><a href="http://chimera.labs.oreilly.com/books/1234000000726/ch10.html">link</a></p>

<p>SUPER ANNOYED tonight and this freaking chapter just keeps on going on and on.  I will finish this post another night, but I want get up some code for the meetup tomorrow.</p>

<figure class='code'><figcaption><span> (call_data.csv)</span> <a href='/downloads/code/erlang-etudes/ch10/call_data.csv'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="mi">650</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">3326</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">11</span>
</span><span class='line'><span class="mi">415</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">7871</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">09</span>
</span><span class='line'><span class="mi">729</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">8855</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">18</span>
</span><span class='line'><span class="mi">729</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">8855</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">57</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">56</span>
</span><span class='line'><span class="mi">213</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0172</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">59</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">49</span>
</span><span class='line'><span class="mi">946</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">9760</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">10</span>
</span><span class='line'><span class="mi">301</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0433</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">44</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">06</span>
</span><span class='line'><span class="mi">301</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0433</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">53</span>
</span><span class='line'><span class="mi">301</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0433</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">05</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">14</span>
</span><span class='line'><span class="mi">729</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">8855</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">29</span>
</span><span class='line'><span class="mi">213</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0172</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">26</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span>
</span><span class='line'><span class="mi">213</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0172</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">59</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">35</span>
</span><span class='line'><span class="mi">946</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">9760</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">23</span>
</span><span class='line'><span class="mi">838</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">1099</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">43</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">44</span>
</span><span class='line'><span class="mi">650</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">3326</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">08</span>
</span><span class='line'><span class="mi">838</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">1099</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">43</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">26</span>
</span><span class='line'><span class="mi">838</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">1099</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">54</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">10</span>
</span><span class='line'><span class="mi">301</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">0433</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">07</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">08</span>
</span><span class='line'><span class="mi">415</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">7871</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">32</span>
</span><span class='line'><span class="mi">650</span><span class="o">-</span><span class="mi">555</span><span class="o">-</span><span class="mi">3326</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span><span class="mi">2013</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">09</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">09</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span> (phone_records.hrl)</span> <a href='/downloads/code/erlang-etudes/ch10/phone_records.hrl'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">record</span> <span class="p">(</span><span class="nl">phone_record</span><span class="p">,</span> <span class="p">{</span><span class="n">phone_number</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">}).</span>
</span><span class='line'><span class="p">-</span><span class="ni">record</span> <span class="p">(</span><span class="nl">customer</span><span class="p">,</span> <span class="p">{</span><span class="n">phone_number</span><span class="p">,</span> <span class="n">name_last</span><span class="p">,</span> <span class="n">name_first</span><span class="p">,</span> <span class="n">name_middle</span><span class="p">,</span> <span class="n">rate_per_minute</span><span class="p">}).</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span> (phone_bill.erl)</span> <a href='/downloads/code/erlang-etudes/ch10/phone_bill.erl'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span> <span class="p">(</span><span class="n">phone_bill</span><span class="p">).</span>
</span><span class='line'><span class="p">-</span><span class="ni">export</span> <span class="p">([</span><span class="n">init</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="n">read_bill</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="n">summary</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="n">summary</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span>
</span><span class='line'><span class="p">-</span><span class="ni">include</span> <span class="p">(</span><span class="s">&quot;phone_records.hrl&quot;</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">read_to_end</span><span class="p">(</span><span class="nv">FileLocation</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="k">case</span> <span class="nn">file</span><span class="p">:</span><span class="nf">open</span><span class="p">(</span><span class="nv">FileLocation</span><span class="p">,</span> <span class="p">[</span><span class="n">read</span><span class="p">])</span> <span class="k">of</span>
</span><span class='line'>      <span class="p">{</span><span class="n">error</span><span class="p">,</span><span class="n">enoent</span><span class="p">}</span> <span class="o">-&gt;</span>
</span><span class='line'>          <span class="p">[];</span>
</span><span class='line'>      <span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="nv">File</span><span class="p">}</span> <span class="o">-&gt;</span> <span class="n">read_to_end</span><span class="p">(</span><span class="nv">File</span><span class="p">,</span> <span class="p">[])</span>
</span><span class='line'>  <span class="k">end</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">read_to_end</span><span class="p">({</span><span class="n">error</span><span class="p">,</span><span class="n">enoent</span><span class="p">},</span> <span class="p">_)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">[];</span>
</span><span class='line'><span class="nf">read_to_end</span><span class="p">(_,</span> <span class="p">[</span><span class="n">eof</span><span class="p">|</span><span class="nv">Lines</span><span class="p">])</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">lists</span><span class="p">:</span><span class="nf">reverse</span><span class="p">(</span><span class="nv">Lines</span><span class="p">);</span>
</span><span class='line'><span class="nf">read_to_end</span><span class="p">(</span><span class="nv">File</span><span class="p">,</span> <span class="nv">Lines</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="n">read_to_end</span><span class="p">(</span><span class="nv">File</span><span class="p">,</span> <span class="p">[</span><span class="nn">io</span><span class="p">:</span><span class="nf">get_line</span><span class="p">(</span><span class="nv">File</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)|</span><span class="nv">Lines</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">read_phone_record_from_csv</span><span class="p">(</span><span class="nv">CsvLine</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">[</span><span class="nv">Number</span><span class="p">,</span><span class="nv">SDate</span><span class="p">,</span><span class="nv">STime</span><span class="p">,</span><span class="nv">EDate</span><span class="p">,</span><span class="nv">ETime</span><span class="p">|_]</span> <span class="o">=</span> <span class="nn">re</span><span class="p">:</span><span class="nf">split</span><span class="p">(</span><span class="nv">CsvLine</span><span class="p">,</span> <span class="s">&quot;[,</span><span class="se">\n</span><span class="s">]&quot;</span><span class="p">,</span> <span class="p">[{</span><span class="n">return</span><span class="p">,</span><span class="n">list</span><span class="p">}]),</span>
</span><span class='line'>  <span class="nl">#phone_record</span><span class="p">{</span>
</span><span class='line'>      <span class="n">phone_number</span><span class="o">=</span><span class="nv">Number</span><span class="p">,</span>
</span><span class='line'>      <span class="n">start_date</span><span class="o">=</span><span class="n">read_date_time</span><span class="p">(</span><span class="nv">SDate</span><span class="p">,</span><span class="nv">STime</span><span class="p">),</span>
</span><span class='line'>      <span class="n">end_date</span><span class="o">=</span><span class="n">read_date_time</span><span class="p">(</span><span class="nv">EDate</span><span class="p">,</span><span class="nv">ETime</span><span class="p">)}.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">read_date_time</span><span class="p">(</span><span class="nv">DateStr</span><span class="p">,</span> <span class="nv">TimeStr</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">{</span><span class="n">parse_three_numbers_crap</span><span class="p">(</span><span class="nn">re</span><span class="p">:</span><span class="nf">split</span><span class="p">(</span><span class="nv">DateStr</span><span class="p">,</span> <span class="s">&quot;-&quot;</span><span class="p">,</span> <span class="p">[{</span><span class="n">return</span><span class="p">,</span><span class="n">list</span><span class="p">}])),</span>
</span><span class='line'>  <span class="n">parse_three_numbers_crap</span><span class="p">(</span><span class="nn">re</span><span class="p">:</span><span class="nf">split</span><span class="p">(</span><span class="nv">TimeStr</span><span class="p">,</span> <span class="s">&quot;:&quot;</span><span class="p">,</span> <span class="p">[{</span><span class="n">return</span><span class="p">,</span><span class="n">list</span><span class="p">}]))}.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">parse_three_numbers_crap</span><span class="p">(</span><span class="nv">ThreeStringArray</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="p">[{</span><span class="nv">N1</span><span class="p">,_},{</span><span class="nv">N2</span><span class="p">,_},{</span><span class="nv">N3</span><span class="p">,_}]</span> <span class="o">=</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">map</span><span class="p">(</span><span class="k">fun</span><span class="p">(</span><span class="nv">S</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nn">string</span><span class="p">:</span><span class="nf">to_integer</span><span class="p">(</span><span class="nv">S</span><span class="p">)</span> <span class="k">end</span><span class="p">,</span> <span class="nv">ThreeStringArray</span><span class="p">),</span>
</span><span class='line'>  <span class="p">{</span><span class="nv">N1</span><span class="p">,</span><span class="nv">N2</span><span class="p">,</span><span class="nv">N3</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">diff_date</span><span class="p">(</span><span class="nv">Date1</span><span class="p">,</span> <span class="nv">Date2</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">calendar</span><span class="p">:</span><span class="nf">datetime_to_gregorian_seconds</span><span class="p">(</span><span class="nv">Date1</span><span class="p">)</span> <span class="o">-</span>
</span><span class='line'>      <span class="nn">calendar</span><span class="p">:</span><span class="nf">datetime_to_gregorian_seconds</span><span class="p">(</span><span class="nv">Date2</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">init</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">ets</span><span class="p">:</span><span class="nf">new</span><span class="p">(</span><span class="n">phone_record</span><span class="p">,</span> <span class="p">[</span><span class="n">named_table</span><span class="p">,</span> <span class="p">{</span><span class="n">keypos</span><span class="p">,</span> <span class="nl">#phone_record.phone_number</span><span class="p">},</span> <span class="n">bag</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nf">read_bill</span><span class="p">(</span><span class="nv">FileLocation</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Records</span> <span class="o">=</span> <span class="n">read_to_end</span><span class="p">(</span><span class="nv">FileLocation</span><span class="p">),</span>
</span><span class='line'>  <span class="n">add_calls</span><span class="p">(</span><span class="nv">Records</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">add_calls</span><span class="p">([])</span> <span class="o">-&gt;</span> <span class="n">ok</span><span class="p">;</span>
</span><span class='line'><span class="nf">add_calls</span><span class="p">([</span><span class="nv">Record</span><span class="p">|</span><span class="nv">RemainingRecords</span><span class="p">])</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nn">ets</span><span class="p">:</span><span class="nf">insert</span><span class="p">(</span><span class="n">phone_record</span><span class="p">,</span>
</span><span class='line'>      <span class="n">read_phone_record_from_csv</span><span class="p">(</span><span class="nv">Record</span><span class="p">)),</span>
</span><span class='line'>  <span class="n">add_calls</span><span class="p">(</span><span class="nv">RemainingRecords</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">summary</span><span class="p">(</span><span class="nv">PhoneNumber</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">Records</span> <span class="o">=</span> <span class="nn">ets</span><span class="p">:</span><span class="nf">lookup</span><span class="p">(</span><span class="n">phone_record</span><span class="p">,</span><span class="nv">PhoneNumber</span><span class="p">),</span>
</span><span class='line'>  <span class="p">{</span><span class="nv">PhoneNumber</span><span class="p">,</span> <span class="p">(</span>
</span><span class='line'>      <span class="nn">lists</span><span class="p">:</span><span class="nf">foldl</span><span class="p">(</span><span class="k">fun</span><span class="p">(</span><span class="nv">R</span><span class="p">,</span> <span class="nv">Sum</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">diff_date</span><span class="p">(</span><span class="nv">R</span><span class="nl">#phone_record.end_date</span><span class="p">,</span><span class="nv">R</span><span class="nl">#phone_record.start_date</span><span class="p">)</span> <span class="o">+</span> <span class="nv">Sum</span> <span class="k">end</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nv">Records</span><span class="p">)</span>
</span><span class='line'>      <span class="o">+</span> <span class="mi">59</span><span class="p">)</span> <span class="ow">div</span> <span class="mi">60</span><span class="p">}.</span>
</span><span class='line'>
</span><span class='line'><span class="nf">summary</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="n">summary</span><span class="p">(</span><span class="nn">ets</span><span class="p">:</span><span class="nf">first</span><span class="p">(</span><span class="n">phone_record</span><span class="p">),[]).</span>
</span><span class='line'>
</span><span class='line'><span class="nf">summary</span><span class="p">(</span><span class="n">&#39;$end_of_table&#39;</span><span class="p">,</span> <span class="nv">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nv">List</span><span class="p">;</span>
</span><span class='line'><span class="nf">summary</span><span class="p">(</span><span class="nv">PhoneNumber</span><span class="p">,</span> <span class="nv">List</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="n">summary</span><span class="p">(</span><span class="nn">ets</span><span class="p">:</span><span class="nf">next</span><span class="p">(</span><span class="n">phone_record</span><span class="p">,</span> <span class="nv">PhoneNumber</span><span class="p">),</span> <span class="p">[</span><span class="n">summary</span><span class="p">(</span><span class="nv">PhoneNumber</span><span class="p">)|</span><span class="nv">List</span><span class="p">]).</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/07/28/etudes-for-erlang-ch-9/">
			
				Études for Erlang - CH 9</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-07-28T13:02:00-04:00" pubdate data-updated="true">Jul 28<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>Welcome back, my fellow Erlangers!!  After last weeks etude about <a href="/2013/07/22/etudes-for-erlang-ch-8/">processess</a>, let&rsquo;s just say I am super excited to get started on chapter 9 this week.  I mean who could not be excited.  Not only did we all get to relive a small part of our childhood, but we also got into the MEAT of Erlang.  It was also the first time that as a programmer you could really show your personallity within your code.  Prior to chapter 8, each little detail was spelled out for how to do every execise leaving little to the imagination.</p>

<p>What this led to in the <a href="http://www.meetup.com/Erlang-NYC/">Meetup</a> atleast, was a bunch of code that all looked exactly the same.  For chapter 8&rsquo;s show and tell, each developer who showed their solution had a slightly different way of doing it.  There were the ones who did exactly like the book&rsquo;s solution, all in one module and straight to the point.  Then there were a few of us, like myself, who broke the problem down across a few modules and many functions within each module to better describe the problem with code.</p>

<p>Alright time to get started working on this weeks problems, Ready, Set, GOOOOO!!!
		
		<a href="/2013/07/28/etudes-for-erlang-ch-9/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/07/22/etudes-for-erlang-ch-8/">
			
				Études for Erlang - CH 8</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-07-22T23:14:00-04:00" pubdate data-updated="true">Jul 22<span>nd</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>For the past few weeks we have been diving into the normal workings of Erlang.  So far however we have not really ran into anything that makes Erlang special.  To be honest if what we have gone over so far is all that was to Erlang, I would probably tell you to never use this language ever, ever, ever.  Ok maybe that is a little over the top, but as you saw in <a href="/2013/07/08/etudes-for-erlang-ch-5/">Chapter 5</a> Erlang does not handle strings very nicely and that is a lot of what a I use in my day to day programming.</p>

<p>BUT FEAR NOT, my fellow compatriots, there is way more to Erlang.  Today, in this etude we will enter the bread and butter of Erlang.  Welcome my friends to Erlang <a href="http://www.erlang.org/doc/reference_manual/processes.html">Processes</a>!!!! 
		
		<a href="/2013/07/22/etudes-for-erlang-ch-8/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/07/15/etudes-for-erlang-ch-7/">
			
				Études for Erlang - CH 7</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-07-15T22:58:00-04:00" pubdate data-updated="true">Jul 15<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>I have been working double duty tonight, since I have been slacking on my blogging duty.  I am again slacking, I am going to skip from <a href="/2013/07/08/etudes-for-erlang-ch-5/">chapter 5</a> to chapter 6 for now. 
		
		<a href="/2013/07/15/etudes-for-erlang-ch-7/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/07/08/etudes-for-erlang-ch-5/">
			
				Études for Erlang - CH 5</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-07-08T23:36:00-04:00" pubdate data-updated="true">Jul 8<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>Have you missed me??  For the past two weeks I have been driving to and from many a wedding.  My cousin, Olivia, got married two weeks ago to an awesome man, John!  Then this past weekend my best friend growing up, Ben, got married to a lady who I do not know to well but any person he would marry must be a great gal!  To each of you I wish you the best!</p>

<p>I am going to stick to doing only do one chapter per blog post.  Hopefully you should see two more posts right after this one!  For those of you who have forgotten completely what I have been talking about for the past 6 weeks check out <a href="/2013/06/25/etudes-for-erlang-ch-4/">chapter 4</a>.</p>

<p>Let&rsquo;s hop right into the good stuff!
		
		<a href="/2013/07/08/etudes-for-erlang-ch-5/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/06/25/etudes-for-erlang-ch-4/">
			
				Études for Erlang - CH 4</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-06-25T23:26:00-04:00" pubdate data-updated="true">Jun 25<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>This week the homework for the <a href="http://www.meetup.com/Erlang-NYC/events/123394132/" target="_blank">meetup</a> was chapters 4 &amp; 5.  However this weekend I was at my childhood best friend&rsquo;s bachelor party so I only got to chapter 4. Ouch, Ouch, please stop throwing tomatoes, lettuce and actually I don&rsquo;t want to know what that is, I am sorry!  If you want more Erlang check out last week for <a href="/2013/06/16/etudes-for-erlang-ch-3/">chapter 3</a>, again!</p>

<p>The party was a blast I got to play Frisbee golf for the first time in real life, it was awesome.  The other plus was the party&rsquo;s location was in Richmond, VA, so I got to rent a car and drive all the way there.  For those of you who do not know me, I LOVE TO DRIVE!!!  I specifically went to a rental company just because I heard they had VW Jettas for rent.  Must say, this whole better gas mileage kick the auto industry is on really makes driving automatics suck.  Give me a manual any day.</p>

<p>Oh wow I really got off track, my B.
		
		<a href="/2013/06/25/etudes-for-erlang-ch-4/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/06/16/etudes-for-erlang-ch-3/">
			
				Études for Erlang - CH 3</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-06-16T23:01:00-04:00" pubdate data-updated="true">Jun 16<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>It is that time again, well I don&rsquo;t really know if I can say that yet since this is only the second installment of the series.  Last week I wrote about <a href="/2013/06/14/etudes-for-erlang-ch-1-and-2/">chapters 1 &amp; 2</a> from <a href="http://chimera.labs.oreilly.com/books/1234000000726" target="_blank">Etudes for Erlang</a>, however I actually wrote my solutions after the <a href="http://www.meetup.com/Erlang-NYC/events/122174852/" target="_blank">meetup</a>.  This time I am getting a head start and thankfully I only have to do one chapter. I will just hop right into it, because I am excited to learn some more about Erlang!
		
		<a href="/2013/06/16/etudes-for-erlang-ch-3/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2013/06/14/etudes-for-erlang-ch-1-and-2/">
			
				Études for Erlang – CH 1 &amp; 2</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-06-14T22:41:00-04:00" pubdate data-updated="true">Jun 14<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>Have you ever thought to yourself, &ldquo;What can I do with all my spare time&rdquo; or maybe &ldquo;There are all these people at work, that I really would like to get to know better&rdquo;?  No, <em>really</em>, oh well I have.  The game plan I came up with was simple, find something that was related to work but happened after work and beer was provided.  The answer to all the worlds problems is <a href="http://www.erlang.org/" target="_blank">Erlang</a>, dun dun duda&hellip;.  Ok maybe not, but the newly re-minted <a href="http://www.meetup.com/Erlang-NYC/" target="_blank">Erlang-NYC</a> meetup group was the answer to my problems.  For those of you who have never heard of this &ldquo;<a href="http://www.meetup.com" target="_blank">Meetup</a>&rdquo; idea, it is a group of people getting together to talk or act on a unified topic or activity.  This meetup&rsquo;s unified topic is Erlang, DUH, and they get together about once a month or more.
		
		<a href="/2013/06/14/etudes-for-erlang-ch-1-and-2/" class="more-link">Read on &rarr;</a>
	</div>

</article>


</div>
	<footer id="footer" class="inner">&copy; 2013

    Connor Ross

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'connorrosstech';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42145286-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>
